{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block title %}ورود به پنل پذیرش{% endblock %}

{% block navbar_extra_class %}d-none{% endblock %} {% block main_container_class %}container-fluid vh-100 d-flex align-items-center justify-content-center bg-light{% endblock %}

{% block content %}
<div class="col-md-4">
    <div class="card border-0 shadow-lg rounded-4">
        <div class="card-body p-5 text-center">
            <div class="mb-4 text-primary">
                <i class="bi bi-shield-lock-fill" style="font-size: 4rem;"></i>
            </div>
            <h4 class="fw-bold mb-4">ورود به پنل مدیریت</h4>
            
            <form method="post">
                {% csrf_token %}
                {{ form|crispy }}
                <button type="submit" class="btn btn-dark w-100 py-3 mt-4 rounded-pill fw-bold shadow-sm">ورود ایمن</button>
            </form>
            
            <div class="mt-4 pt-3 border-top">
                <a href="{% url 'clinic:home' %}" class="text-muted small text-decoration-none"><i class="bi bi-arrow-right me-1"></i>بازگشت به سایت</a>
            </div>
        </div>
    </div>
</div>

{# اسکریپت جاوااسکریپت را اینجا هم به صورت دستی اضافه می‌کنیم تا استایل هماهنگ شود #}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const passwordInputs = document.querySelectorAll('input[type="password"]');
        passwordInputs.forEach(function (input) {
            const eyeBtn = document.createElement('button');
            eyeBtn.type = 'button';
            eyeBtn.className = 'password-toggle-btn';
            eyeBtn.tabIndex = -1;
            eyeBtn.innerHTML = '<i class="bi bi-eye"></i>';
            
            const wrapper = document.createElement('div');
            wrapper.className = 'password-group-wrapper';
            
            input.parentNode.insertBefore(wrapper, input);
            wrapper.appendChild(input);
            wrapper.appendChild(eyeBtn);
            
            eyeBtn.addEventListener('click', function () {
                const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
                input.setAttribute('type', type);
                const icon = this.querySelector('i');
                if (type === 'text') {
                    icon.classList.replace('bi-eye', 'bi-eye-slash');
                    icon.classList.add('text-primary');
                } else {
                    icon.classList.replace('bi-eye-slash', 'bi-eye');
                    icon.classList.remove('text-primary');
                }
            });
        });
    });
</script>
{% endblock %}
{% extends 'reception_panel/reception_base.html' %}

{% block title %}مدیریت خدمات{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="fw-bold mb-0">خدمات کلینیک</h3>
    <div class="alert alert-info py-1 px-3 mb-0 small">
        <i class="bi bi-info-circle me-1"></i>برای افزودن خدمت جدید از پنل ادمین اصلی استفاده کنید.
    </div>
</div>

<div class="accordion" id="servicesAccordion">
    {% for group in service_groups %}
    <div class="accordion-item shadow-sm border-0 mb-3 rounded overflow-hidden">
        <h2 class="accordion-header" id="heading{{ group.id }}">
            <button class="accordion-button {% if not forloop.first %}collapsed{% endif %} bg-white fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ group.id }}">
                {{ group.name }}
            </button>
        </h2>
        <div id="collapse{{ group.id }}" class="accordion-collapse collapse {% if forloop.first %}show{% endif %}" data-bs-parent="#servicesAccordion">
            <div class="accordion-body bg-light">
                
                <div class="mb-3 d-flex justify-content-between align-items-center">
                    <span class="text-muted small">مدیریت ساعات کاری کلی گروه:</span>
                    <a href="{% url 'reception_panel:work_hours_group_update' group.id %}" class="btn btn-sm btn-outline-primary bg-white">
                        <i class="bi bi-clock me-1"></i> ساعات کاری گروه
                    </a>
                </div>

                <div class="list-group shadow-sm">
                    {% for service in group.services.all %}
                    <div class="list-group-item d-flex justify-content-between align-items-center p-3">
                        <div>
                            <h6 class="mb-1 fw-bold">{{ service.name }}</h6>
                            <small class="text-muted">{{ service.duration }} دقیقه</small>
                        </div>
                        <div class="btn-group">
                            <a href="{% url 'reception_panel:service_update' service.id %}" class="btn btn-sm btn-outline-secondary" title="ویرایش جزئیات">
                                <i class="bi bi-pencil"></i>
                            </a>
                            <a href="{% url 'reception_panel:work_hours_service_update' service.id %}" class="btn btn-sm btn-outline-primary" title="ساعات کاری اختصاصی">
                                <i class="bi bi-clock-history"></i>
                            </a>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}